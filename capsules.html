<!DOCTYPE html>
<html lang="fr">
<head><meta charset="UTF-8"><title>Capsules RAUN</title></head>
<body>
  <h1>ðŸ§  Capsules publiÃ©es</h1>
  <div id="capsulesContainer"></div>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore-compat.js"></script>
  <script src="firebaseConfig.js"></script>
  <script>
    const db = firebase.firestore();
    const container = document.getElementById("capsulesContainer");
    db.collection('capsules').orderBy('date','desc').get()
      .then(snapshot => {
        if (snapshot.empty) return container.innerHTML = "<p>Aucune capsule pour le moment...</p>";
        snapshot.forEach(doc => {
          const c = doc.data();
          const div = document.createElement("div");
          div.className = "capsule";
          div.innerHTML = `<h2>${c.title}</h2><p>${c.content}</p><time>ðŸ•’ ${new Date(c.date).toLocaleString()}</time>`;
          container.appendChild(div);
        });
      })
      .catch(e => container.innerHTML = "<p>Erreur de chargement</p>");
  </script>
</body>
</html>
